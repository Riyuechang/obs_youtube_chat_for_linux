<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>text_to_display</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&family=Roboto&display=swap" rel="stylesheet">
    
    <!-- JQuery 的 CDN 連結 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        
    <!-- Socket.IO 的 CDN 連結 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.2.0/socket.io.js"
        integrity="sha512-WL6WGKMPBiM9PnHRYIn5YEtq0Z8XP4fkVb4qy7PP4vhmYQErJ/dySyXuFIMDf1eEYCXCrQrMJfkNwKc9gsjTjA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <!-- Socket.IO 的使用 -->
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function () {
            // Socket.IO Start connect
            var url = 'http://127.0.0.1';
            var port = '3200';
            var socket = io.connect(url + ':' + port);

            // Socket.IO send_message message
            socket.on('send_message', function (data) {
                var brDiv = document.createElement('br');
                var background_image_1 = document.createElement('div');
                var background_image_2 = document.createElement('div');
                var message = document.createElement('div');

                message.className = "message_box";
                message.textContent = data.author_name + ": " + data.message;

                background_image_1.className = "background_image_1"
                background_image_1.appendChild(message);

                background_image_2.className = "background_image_2"
                background_image_2.appendChild(background_image_1);

                //brDiv.className = "font-size:10px;"
                //brDiv.appendChild(textDiv)
                document.getElementById('text_to_display').appendChild(background_image_2);
                document.getElementById('text_to_display').appendChild(brDiv);
            });

            // Socket.IO clear
            socket.on('clear', function () {
                document.getElementById('text_to_display').textContent = "";
            });
        });

        var scroll = setInterval(function(){window.scrollTo(0, document.body.scrollHeight)},100);
    </script>
    <style>
        br {
            content:"";
            margin: 0.5em;
            display:block;
        }

        .Display_range {
            width: 100vw;
            height: 100vh;
            display: table;
        }

        .Display_range div {
            display: table-cell;
            vertical-align: bottom;
            text-align: left;
        }

        .Literal_parameters {
            font-size:16px;
            line-height:1.2;
            color: #333;
            /*text-shadow: -1px -1px 0 #000,
                            1px -1px 0 #000,
                            -1px 1px 0 #000,
                            1px 1px 0 #000;*/

            /*word-break:break-all;*/
            /*word-wrap:break-word;*/
            /*white-space:pre-line;*/
            overflow-wrap: break-word;
            white-space:pre-wrap; 
            font-family: "Noto Sans TC", sans-serif;
        }
        
        .message_box {
            max-width: 95vw;
            width: 100%;
            height: 100%;
        }

        .background_image_1 {
            padding: 5px;
            background-image: url("./static/background_image/image_1.png");
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
        }

        .background_image_2 {
            padding: 5px;
            background-image: url("./static/background_image/image_2.png");
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center;
        }
    </style>
</head>

<body>
    <b>
        <div class="Display_range Literal_parameters">
            <div id="text_to_display"></div>
        </div>
    </b>
</body>
</html>